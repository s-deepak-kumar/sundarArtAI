<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>sundarArtAI - Explore open source AI models to make content, high accuracy!</title>
    <meta content="sundarArtAI helps you to generate content within few seconds. It also increase accessibility for users who don't want to wait longer. Optimize your workflows with our advanced AI modals." name="description">
    <meta content="audio,video,summarizer,transcript,setiment,analysis,ai,models" name="keywords">

    <meta property="og:title" content="sundarArtAI - Explore open source AI models to make content, high accuracy.!">
    <meta property="og:description" content="sundarArtAI helps you to generate content within few seconds. It also increase accessibility for users who don't want to wait longer. Optimize your workflows with our advanced AI modals.">
    <meta property="og:type" content="article">

    <!-- Favicons -->
    <link href="/img/favicon.ico" rel="icon">
    <link href="/img/favicon.ico" rel="apple-touch-icon">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Secular+One&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Signika&display=swap" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/css/util.css">
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <!--===============================================================================================-->

    <!-- Template Main CSS File -->
    <link href="/css/style.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

<style>
    video,
    audio {
        box-shadow: 0 0 0 4px rgba(88, 55, 208, 0.5);
        border-radius: 8px;
        width: 100%;
    }
    
    audio {
        border-radius: 50px !important;
    }
    
    .accordion .accordion-item {
        border: none;
    }
    
    .accordion .accordion-item .accordion-header .accordion-button {
        padding: 15px 5px;
        font-size: 20px;
    }
    
    .accordion .accordion-item .accordion-body {
        padding: 10px 10px;
        font-size: 18px;
    }
    
    .accordion .accordion-item .accordion-header .accordion-button:hover {
        background-color: rgba(88, 55, 208, 0.2) !important;
        border-radius: 10px;
    }
    
    .accordion .accordion-item .accordion-header .accordion-button:focus {
        color: rgba(88, 55, 208, 1) !important;
        box-shadow: none;
    }
</style>

<body>

    <!-- ======= Hero Section ======= -->
    <section id="hero" class="hero d-flex" style="background-color: #000000; padding: 10px 0;">

        <div class="container-fluid container-xl d-flex align-items-center justify-content-between" style="max-width: 95%;">

            <button onclick="history.back()" class="logo d-flex align-items-center">
                <!-- <img src="/img/logo40px5.png" alt=""> -->
                <div id="back-btn" class="d-flex align-items-center justify-content-center">
                    <img src="/img/ic_back.png" width="20" height="20" alt="Logo Pixel Light">
                </div>
            </button>

            <div style="width: 100%;">
                <p class="text-white" style="text-align: center; font-size: 18px;">
                    <i style="padding: 3.5px 5.5px; font-size: 18px; border-radius: 100%; background-color: rgba(40, 167, 70, 0.2);" class="bi bi-check text-success"></i> <strong class="text-success mr-2"> File selected  </strong> <i style="padding: 3.5px 5.5px; font-size: 18px; border-radius: 100%; background-color: rgba(40, 167, 70, 0.2);"
                        class="bi bi-box text-success"></i> <strong class="text-success mr-2">Select modal</strong> <i style="padding: 3.5px 5.5px; font-size: 18px; border-radius: 100%; background-color: rgba(255, 193, 7, 0.2);" class="bi bi-card-text text-warning"></i>                    <span class="text-warning" id="dynamic-status">Uploading</span></p>
            </div>

            <a href="/speech-to-text" id="start-btn" class="btn btn-primary" style="text-align: right;">Start</a>

            <!-- .navbar -->

        </div>

    </section>
    <!-- End Hero -->

    <main id="main">

        <!-- ======= About Section ======= -->
        <section class="about">

            <div class="container p-0" style="background-color: transparent;">
                <div class="row text-center justify-content-center">
                    <div class="col-md-4 text-center p-4 m-4" id="loading-bar">
                        <img src="/img/loading_puzzle.gif" class="img-fluid" height="100" width="100">
                        <h4 id="loading-title" class="m-2">File is being upload!</h4>
                        <span id="loading-desc" style="font-size: 18px;">It'll take a few moments to upload, just wait!</span>
                    </div>
                </div>
                <div class="row text-center justify-content-center m-3" id="result">
                    <div class="col-md-7 text-start p-3">
                        <h2>Transcript <span id="sentiment-verdict" class="text-white bg-success p-1" style="font-weight: bold; font-size: 16px; border-radius: 50px;">POSITIVE</span></h2>
                        <div class="mt-2" style="font-size: 18px;" id="transcript-text">

                        </div>
                    </div>

                    <div class="col-md-5 text-start p-3">
                        <div class="text-center">
                            <% if(mimeType == "video"){ %>
                                <video controls>
                                    <source src="/uploads/<%=id%>.<%=type%>">
                                </video>
                                <% }else{ %>
                                    <audio controls>
                                        <source src="/uploads/<%=id%>.<%=type%>">
                                    </audio>
                                    <% } %>
                        </div>
                        <div class="accordion accordion-flush mt-4" id="modals">
                            <div class="accordion-item" id="summarizationDiv">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#summarization-open-div">Summarization</button>
                                </h2>
                                <div id="summarization-open-div" class="accordion-collapse collapse" data-bs-parent="#modals">
                                    <div class="accordion-body">
                                        <p id="summarize-text" class="m-0 p-0"></p>
                                    </div>
                                </div>
                            </div>

                            <div class="accordion-item mt-4" id="autoChaptersDiv">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#auto-chapters-open-div">Auto Chapters</button>
                                </h2>
                                <div id="auto-chapters-open-div" class="accordion-collapse collapse" data-bs-parent="#modals">
                                    <div class="accordion-body" id="auto-chapters-text">

                                    </div>
                                </div>
                            </div>

                            <div class="accordion-item mt-4" id="topicDetectionDiv">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#topic-detection-open-div">Topics</button>
                                </h2>
                                <div id="topic-detection-open-div" class="accordion-collapse collapse" data-bs-parent="#modals">
                                    <div class="accordion-body" id="topic-detection-text">

                                    </div>
                                </div>
                            </div>

                            <div class="accordion-item mt-4" id="contentModerationDiv">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#content-moderation-open-div">Content Moderation</button>
                                </h2>
                                <div id="content-moderation-open-div" class="accordion-collapse collapse" data-bs-parent="#modals">
                                    <div class="accordion-body" id="content-moderation-text">

                                    </div>
                                </div>
                            </div>

                            <div class="accordion-item mt-4" id="importantPhrasesDiv">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#important-phrases-open-div">Important Phrases</button>
                                </h2>
                                <div id="important-phrases-open-div" class="accordion-collapse collapse" data-bs-parent="#modals">
                                    <div class="accordion-body" id="important-phrases-text">

                                    </div>
                                </div>
                            </div>

                            <div class="accordion-item mt-4" id="sentimentAnalysisDiv">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sentiment-analysis-open-div">Sentiment Analysis</button>
                                </h2>
                                <div id="sentiment-analysis-open-div" class="accordion-collapse collapse" data-bs-parent="#modals">
                                    <div class="accordion-body">
                                        <p id="sentiment-analysis-text" class="m-0 p-0"></p>
                                    </div>
                                </div>
                            </div>

                            <div class="accordion-item mt-4" id="entityDetectionDiv">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#entity-detection-open-div">Entity Detection</button>
                                </h2>
                                <div id="entity-detection-open-div" class="accordion-collapse collapse" data-bs-parent="#modals">
                                    <div class="accordion-body" id="entity-detection-text">

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </section>
        <!-- End About Section -->

    </main>
    <!-- End #main -->

    <!-- Vendor JS Files -->
    <script src="/vendor/bootstrap/js/bootstrap.bundle.js"></script>

    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer p-4 m-0" style="background-color: transparent;">
        <div class="container text-center">
            <h3 class="mt-3">@sundarArtAI</h3>
            <span class="mt-3">Made with love with AssemblyAI</span>
        </div>
    </footer>
    <!-- End Footer -->

    <!--===============================================================================================-->
    <script>
        var mimeType = '<%=mimeType%>';
        var id = '<%=id%>';
        var type = '<%=type%>';
        var modals = '<%=modals%>';
        //console.log(modals.split(','))
        if (id != '') {
            $('#loading-bar').show();
            $('#result').hide();
            $('#start-btn').hide();

            $.ajax({
                url: '/upload_file',
                type: 'POST',
                data: 'id=' + id + '&type=' + type,
                dataType: 'JSON'
            }).done(function(response) {
                if (response.status == 200) {
                    $('#status-icon').removeClass('bi-upload').addClass('bi-arrow-clockwise');
                    $('#dynamic-status').text("Transcribing!");

                    $('#loading-title').text("We're transcribing your audio/video");
                    $('#loading-desc').text("Transcribing time take roughly 15-30% of the file's duration. For example, a 10 minute file takes 90-180 seconds to complete. After completion you can copy the text.");

                    $.ajax({
                        url: '/summarize',
                        type: 'POST',
                        data: 'upload_url=' + response.upload_url + '&modals=' + modals,
                        dataType: 'JSON'
                    }).done(function(response) {
                        if (response.status == 200) {
                            $('#loading-bar').hide();
                            $('#result').show();

                            $('#status-icon').removeClass('bi-arrow-clockwise').addClass('bi-check');
                            $('#dynamic-status').text("View results!");

                            $('#start-btn').show();

                            console.log(response.transcript)

                            if (response.speakerLabels.length > 0) {
                                response.speakerLabels.forEach(chat => {
                                    $('#transcript-text').append('<div> <p class="m-0 p-0" style="font-weight: bold;">SPEAKER ' + chat.speaker + '</p> <p class="mt-2 mb-2 p-0">' + chat.text + '</p> </div>');
                                });
                            } else if (response.dualChannel.length > 0) {
                                response.dualChannel.forEach(chat => {
                                    $('#transcript-text').append('<div> <p class="m-0 p-0" style="font-weight: bold;">SPEAKER ' + chat.channel + '</p> <p class="mt-2 mb-2 p-0">' + chat.text + '</p> </div>');
                                });
                            } else {
                                $('#transcript-text').append('<div> <p class="mt-2 p-0">' + response.transcript + '</p> </div>');
                            }

                            if (response.summary != "") {
                                $('#summarizationDiv').show();
                                $('#summarize-text').text(response.summary);
                            } else {
                                $('#summarizationDiv').hide();
                            }

                            if (response.autoChapters.length > 0) {
                                $('#autoChaptersDiv').show();
                                response.autoChapters.forEach(chapter => {
                                    $('#auto-chapters-text').append('<div> <p class="mt-2 mb-0 p-0" style="font-weight: bold;">' + chapter.headline + '</p> <p class="m-0 p-0">' + chapter.summary + '</p> </div>');
                                });
                            } else {
                                $('#autoChaptersDiv').hide();
                            }

                            if (response.topics.length > 0) {
                                $('#topicDetectionDiv').show();
                                response.topics.forEach(topic => {
                                    $('#topic-detection-text').append('<p class="mt-0 mb-2 p-0">' + topic + '</p>');
                                });
                            } else {
                                $('#topicDetectionDiv').hide();
                            }

                            if (response.contentModeration.length > 0) {
                                $('#contentModerationDiv').show();
                                response.contentModeration.forEach(content => {
                                    $('#content-moderation-text').append('<p class="mt-0 mb-2 p-0">' + content + '</p>');
                                });
                            } else {
                                $('#contentModerationDiv').hide();
                            }

                            if (response.phrases.length > 0) {
                                $('#importantPhrasesDiv').show();
                                response.phrases.forEach(phrase => {
                                    $('#important-phrases-text').append('<p class="mt-0 mb-2 p-0">' + phrase + '</p>');
                                });
                            } else {
                                $('#importantPhrasesDiv').hide();
                            }

                            if (response.sentiment.positive != 0 || response.sentiment.negative != 0 || response.sentiment.neutral != 0) {
                                $('#sentimentAnalysisDiv').show();
                                $('#sentiment-analysis-text').text(`We found ${response.sentiment.positive} POSITIVE & ${response.sentiment.negative} NEGATIVE sentences`);
                            } else {
                                $('#sentimentAnalysisDiv').hide();
                            }

                            if (response.entities.length > 0) {
                                $('#entityDetectionDiv').show();
                                response.entities.forEach(entity => {
                                    $('#entity-detection-text').append('<div> <p class="mt-2 mb-0 p-0" style="font-weight: bold;">' + entity.entity_type + '</p> <p class="m-0 p-0">' + entity.text + '</p> </div>');

                                });
                            } else {
                                $('#entityDetectionDiv').hide();
                            }


                            if (response.sentiment.positive >= response.sentiment.negative) {
                                $('#sentiment-verdict').text("POSITIVE");
                            } else if (response.sentiment.positive < response.sentiment.negative) {
                                $('#sentiment-verdict').removeClass('bg-success').addClass('bg-danger');
                                $('#sentiment-verdict').text("NEGATIVE");
                            } else {
                                $('#sentiment-verdict').removeClass('bg-success').addClass('bg-warning');
                                $('#sentiment-verdict').text("NEUTRAL");
                            }
                        }
                    }).fail(function() {
                        console.log("AJAX Issue!")
                    })
                }
            }).fail(function() {
                console.log("AJAX Issue!")
            })
        }
    </script>
    <!--===============================================================================================-->

</body>

</html>